{
  "kind": "build_request",
  "title": "Retry deployment and verify production is serving Version 24",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Re-run the full deployment (frontend + backend canisters) and ensure the deployment completes successfully without errors.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "deploy again"
        ]
      },
      "acceptanceCriteria": [
        "Deployment pipeline completes successfully (no 'Deployment didn't complete' status).",
        "Both frontend and backend canisters are deployed and reachable from the production URL."
      ]
    },
    {
      "id": "REQ-2",
      "text": "After redeploy, perform the production smoke/verification checks defined in frontend/DEPLOYMENT_VERIFICATION.md for Version 24.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Deployment didn't complete"
        ]
      },
      "acceptanceCriteria": [
        "Production URL loads without a blank screen and without critical console errors.",
        "Footer shows the version label \"Version 24\" (data-testid=\"app-version\").",
        "Navigation between core pages works (Today, Tomorrow, Knowledge Base, History, Profile).",
        "Internet Identity login/logout flow works in production."
      ]
    },
    {
      "id": "REQ-3",
      "text": "If redeploy fails again, capture and surface the specific deployment error output (build step and failing component) so it can be fixed deterministically, and apply the minimal code/config change required to make the deployment succeed.",
      "target": "unknown",
      "source": {
        "messageIds": [
          "msg-1",
          "msg-2"
        ],
        "quotes": [
          "Deployment didn't complete",
          "deploy again"
        ]
      },
      "acceptanceCriteria": [
        "A concrete, reproducible error message is recorded for the failing step (e.g., frontend build, backend build, canister install/upgrade).",
        "Any required fix is implemented and the subsequent redeploy completes successfully."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in backend/main.mo; only add backend/migration.mo changes if an upgrade requires state migration.",
    "Do not edit files under frontend/src/components/ui or any other frontend immutablePaths; compose existing UI components instead."
  ],
  "nonGoals": [
    "Implementing new product features unrelated to completing deployment.",
    "Changing the application version string (should remain Version 24 unless explicitly requested)."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}